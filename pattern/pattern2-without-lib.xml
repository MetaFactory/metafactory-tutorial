<?xml version="1.0" encoding="UTF-8"?>
<pattern xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.firstbase.nl/xsd/personaliom/pattern"
  xsi:schemaLocation="http://www.firstbase.nl/xsd/personaliom/pattern http://www.firstbase.nl/xsd/personaliom/pattern.xsd"
>
  <properties>
    <java.main.directory>src/main/java/</java.main.directory>
    <conf.main.directory>src/main/resources</conf.main.directory>
    <java.test.directory>src/test/java/</java.test.directory>
    <conf.test.directory>src/test/resources</conf.test.directory>

    <base>org.metafactory.demo.example2</base>

    <model.implementation.package>${pattern.property.base}.model.implementation</model.implementation.package>
    <model.implementation.class>${object.name}</model.implementation.class>
    <model.implementation.reference>${reference.type}</model.implementation.reference>
    <model.implementation.fqcn>${pattern.property.model.implementation.package}.${pattern.property.model.implementation.class}</model.implementation.fqcn>

    <!-- The pk property determines the name of the primary key -->
    <pk>${firstLower(${object.name})}Id</pk>

  </properties>

  <package 	name="${pattern.property.model.implementation.package}"
            path="${pattern.property.java.main.directory}"
            package="domain_model"
            skip="true">
    <class name="${pattern.property.model.implementation.class}" visibility="public" enum="${model.property.object.enum}" foreach="object">
      <libraries>
      </libraries>
      <enumConstants condition="${model.property.object.enum}==true">${fmsnippet.java.pojo.enum.enumConstants}</enumConstants>
      <attribute name="${pattern.property.pk}" access="rw" condition="${model.property.object.enum}==false">
        <datatype>Long</datatype>
        <apicomment>primary key</apicomment>
      </attribute>
      <attribute name="${attribute.name}" foreach="attribute" access="rw">
        <datatype>${attribute.type}</datatype>
        <apicomment>${fmsnippet.java.pojo.attribute.apicomment}</apicomment>
        <body condition="${propertyExists(${model.property.attribute.entity.default.value})}">${model.property.attribute.entity.default.value}</body>
      </attribute>
      <attribute name="${reference.name}" foreach="reference" access="rw" condition="${fmsnippet.condition.reference_1_and_enum}">
        <datatype>${pattern.property.model.implementation.reference}</datatype>
      </attribute>
      <attribute name="${reference.name}" foreach="reference" access="rw" condition="${fmsnippet.condition.reference_1_no_enum}"> <!-- ${reference.multiplicity}=0..1 OR ${reference.multiplicity}=1..1 -->
        <datatype>${pattern.property.model.implementation.reference}</datatype>
      </attribute>
      <attribute name="${reference.name}Set" foreach="reference" access="rw" condition="${reference.multiplicity}=0..n OR ${reference.multiplicity}=1..n">
        <library>java.util.HashSet</library>
        <library>java.util.Set</library>
        <datatype>
          <![CDATA[Set<${pattern.property.model.implementation.reference}>]]>
        </datatype>
        <body>
          <![CDATA[new HashSet<${pattern.property.model.implementation.reference}>()]]>
        </body>
      </attribute>
  <!--
   -->
      <operation name="constructor" condition="${model.property.object.enum}!=true">
        <apicomment>Default constructor which loads defaults by using method loadDefaults</apicomment>
        <body>// do nothing</body>
      </operation>

      <operation name="addTo${firstUpper(${reference.name})}" foreach="reference" condition="${reference.multiplicity}=0..n OR ${reference.multiplicity}=1..n">
        <parameter name="${firstLower(${reference.name})}">
          <datatype>${pattern.property.model.implementation.reference}</datatype>
        </parameter>
        <body>${fmsnippet.java.pojo.operation.addToSet}</body>
      </operation>
      <operation name="deleteFrom${firstUpper(${reference.name})}" foreach="reference" condition="${reference.multiplicity}=0..n OR ${reference.multiplicity}=1..n">
        <parameter name="${firstLower(${reference.name})}">
          <datatype>${pattern.property.model.implementation.reference}</datatype>
        </parameter>
        <body>${fmsnippet.java.pojo.operation.deleteFromSet}</body>
      </operation>
    </class>
  </package>

</pattern>
